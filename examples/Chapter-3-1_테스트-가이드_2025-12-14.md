# Chapter 3-1 실습 예제 테스트 가이드

**작성일**: 2025-12-14

이 문서는 `Chapter-3-1_LangGraph-Workflow-Example_2025-12-14.py` 파일을 실행하고 테스트하는 방법을 안내합니다.

---

## 📋 사전 준비사항

### 1. Python 설치 확인

터미널에서 Python 버전을 확인합니다:

```bash
python --version
```

**권장 버전**: Python 3.9 이상

---

## 🔧 1단계: 가상환경 생성 (권장)

프로젝트별로 독립적인 패키지 관리를 위해 가상환경을 생성합니다.

### Windows (PowerShell/CMD)

```bash
# AI-Agent-Ecosystem 폴더로 이동
cd "C:\Users\robin\OneDrive\바탕 화면\ecosystem\AI-Agent-Ecosystem"

# 가상환경 생성
python -m venv venv

# 가상환경 활성화 (PowerShell)
.\venv\Scripts\Activate.ps1

# 가상환경 활성화 (CMD)
.\venv\Scripts\activate.bat
```

### macOS/Linux

```bash
# AI-Agent-Ecosystem 폴더로 이동
cd ~/Desktop/ecosystem/AI-Agent-Ecosystem

# 가상환경 생성
python -m venv venv

# 가상환경 활성화
source venv/bin/activate
```

**확인**: 가상환경이 활성화되면 프롬프트 앞에 `(venv)`가 표시됩니다.

---

## 📦 2단계: 필요한 패키지 설치

### 기본 패키지 설치

```bash
pip install langgraph langchain-core
```

### 설치 확인

```bash
pip list | grep -E "langgraph|langchain"
```

**예상 출력**:
```
langgraph              0.x.x
langchain-core         0.x.x
```

---

## ▶️ 3단계: 예제 코드 실행

### 방법 1: 터미널에서 직접 실행

```bash
# examples 폴더로 이동
cd examples

# Python 스크립트 실행
python Chapter-3-1_LangGraph-Workflow-Example_2025-12-14.py
```

### 방법 2: VSCode에서 실행

1. `Chapter-3-1_LangGraph-Workflow-Example_2025-12-14.py` 파일 열기
2. 오른쪽 상단의 `▶ Run Python File` 버튼 클릭
3. 또는 `F5` 키를 눌러 디버그 모드로 실행

---

## 📊 예상 출력 결과

코드를 실행하면 다음과 같은 형식으로 결과가 출력됩니다:

```
============================================================
고객 지원 에이전트 테스트
============================================================

질문: 로그인이 안되는 오류가 발생했어요
------------------------------------------------------------
분류: 기술지원

답변:

    기술지원팀 답변:

    문의하신 기술적 문제에 대해 도움을 드리겠습니다.
    원활한 지원을 위해 다음 정보를 제공해 주세요:

    1. 사용 중인 기기 및 운영체제
    2. 오류 발생 시점 및 재현 방법
    3. 오류 메시지 캡처 화면

    추가 문의사항이 있으시면 support@example.com으로 연락 주시기 바랍니다.

============================================================

질문: 환불은 어떻게 하나요?
------------------------------------------------------------
분류: 결제
...
```

---

## 🔍 4단계: 코드 수정 및 실험

### 자신만의 테스트 케이스 추가

`test_agent()` 함수의 `test_questions` 리스트에 새로운 질문을 추가해보세요:

```python
test_questions = [
    "로그인이 안되는 오류가 발생했어요",
    "환불은 어떻게 하나요?",
    "서비스 이용 시간이 궁금합니다",
    "그냥 안녕하세요?",
    # 여기에 새로운 질문 추가
    "비밀번호를 잊어버렸어요",
    "결제 영수증 발급 부탁드립니다"
]
```

### 분류 로직 개선

`classify_question()` 함수의 키워드를 추가하거나 수정해보세요:

```python
if any(keyword in question for keyword in ["오류", "버그", "작동", "안됨", "에러", "비밀번호", "로그인"]):
    category = "기술지원"
```

---

## 🚨 문제 해결 (Troubleshooting)

### 문제 1: `ModuleNotFoundError: No module named 'langgraph'`

**원인**: langgraph 패키지가 설치되지 않음

**해결**:
```bash
pip install langgraph langchain-core
```

### 문제 2: 가상환경 활성화가 안 됨 (Windows PowerShell)

**원인**: PowerShell 실행 정책 제한

**해결**:
```powershell
# PowerShell을 관리자 권한으로 실행 후
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 문제 3: `ImportError` 또는 버전 충돌

**원인**: 패키지 버전 호환성 문제

**해결**:
```bash
# 특정 버전 설치
pip install langgraph==0.2.0 langchain-core==0.3.0

# 또는 최신 버전으로 업데이트
pip install --upgrade langgraph langchain-core
```

---

## 🎯 다음 단계: LLM 연동

현재 예제는 간단한 키워드 기반 분류를 사용합니다. 실제 LLM을 연동하려면:

### 1. OpenAI API 사용 (예시)

```bash
# 추가 패키지 설치
pip install langchain-openai
```

```python
from langchain_openai import ChatOpenAI

# classify_question 함수 수정
def classify_question(state: AgentState) -> AgentState:
    llm = ChatOpenAI(model="gpt-4", api_key="your-api-key")

    prompt = f"""
    다음 고객 질문을 분류해주세요: "{state['question']}"

    카테고리: 기술지원, 결제, 일반문의, 불명확
    """

    response = llm.invoke(prompt)
    state["category"] = response.content
    return state
```

### 2. 환경 변수로 API 키 관리

```bash
# .env 파일 생성
OPENAI_API_KEY=your-api-key-here
```

```bash
# python-dotenv 설치
pip install python-dotenv
```

```python
from dotenv import load_dotenv
import os

load_dotenv()
api_key = os.getenv("OPENAI_API_KEY")
```

---

## 📚 참고 자료

- [LangGraph 공식 문서](https://python.langchain.com/docs/langgraph)
- [LangChain 공식 문서](https://python.langchain.com/docs/get_started/introduction)
- [Python 가상환경 가이드](https://docs.python.org/ko/3/tutorial/venv.html)

---

## ✅ 체크리스트

실습을 완료하려면 다음을 확인하세요:

- [ ] Python 설치 확인 (3.9 이상)
- [ ] 가상환경 생성 및 활성화
- [ ] langgraph, langchain-core 패키지 설치
- [ ] 예제 코드 실행 성공
- [ ] 4가지 테스트 케이스 출력 확인
- [ ] 자신만의 질문으로 테스트
- [ ] 분류 로직 수정 실험

---

## 💡 학습 팁

1. **코드를 직접 수정해보세요**: 주석을 읽고 코드의 각 부분이 어떤 역할을 하는지 이해한 후, 직접 수정해보면서 학습 효과를 높이세요.

2. **디버깅 포인트 추가**: 각 노드 함수에 `print()` 문을 추가하여 상태가 어떻게 변화하는지 추적해보세요.

3. **그래프 시각화**: LangGraph는 그래프를 시각화하는 기능도 제공합니다. 더 복잡한 워크플로우를 만들 때 유용합니다.

4. **에러를 두려워하지 마세요**: 에러가 발생하면 에러 메시지를 읽고 어디가 문제인지 파악하는 연습을 하세요.
